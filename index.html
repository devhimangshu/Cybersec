<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Tailwind E-commerce with Firebase
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Inter', sans-serif;
    }
  </style>
 </head>
 <body class="bg-gray-50 min-h-screen flex flex-col">
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js">
  </script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js">
  </script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js">
  </script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js">
  </script>
  <!-- Navbar -->
  <nav class="bg-white shadow-md sticky top-0 z-50">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16 items-center">
     <div class="flex items-center space-x-4">
      <a class="text-2xl font-bold text-indigo-600" href="#">
       ShopEase
      </a>
      <div class="hidden md:flex space-x-6">
       <a class="text-gray-700 hover:text-indigo-600 font-semibold" href="#products">
        Products
       </a>
       <a class="text-gray-700 hover:text-indigo-600 font-semibold" href="#about">
        About
       </a>
       <a class="text-gray-700 hover:text-indigo-600 font-semibold" href="#contact">
        Contact
       </a>
      </div>
     </div>
     <div class="flex items-center space-x-4">
      <button class="text-gray-700 hover:text-indigo-600 font-semibold" id="loginBtn">
       Login
      </button>
      <button class="hidden text-gray-700 hover:text-indigo-600 font-semibold" id="logoutBtn">
       Logout
      </button>
      <button class="relative text-gray-700 hover:text-indigo-600" id="cartBtn">
       <i class="fas fa-shopping-cart fa-lg">
       </i>
       <span class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center" id="cartCount">
        0
       </span>
      </button>
     </div>
     <div class="-mr-2 flex md:hidden">
      <button class="inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-600" id="mobileMenuBtn">
       <i class="fas fa-bars fa-lg">
       </i>
      </button>
     </div>
    </div>
   </div>
   <!-- Mobile menu -->
   <div class="hidden md:hidden bg-white border-t border-gray-200" id="mobileMenu">
    <a class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-semibold" href="#products">
     Products
    </a>
    <a class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-semibold" href="#about">
     About
    </a>
    <a class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-semibold" href="#contact">
     Contact
    </a>
    <button class="w-full text-left px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-semibold" id="mobileLoginBtn">
     Login
    </button>
    <button class="hidden w-full text-left px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-semibold" id="mobileLogoutBtn">
     Logout
    </button>
   </div>
  </nav>
  <!-- Main content -->
  <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
   <!-- Hero Section -->
   <section class="text-center mb-12">
    <h1 class="text-4xl sm:text-5xl font-extrabold text-indigo-600 mb-4">
     Welcome to ShopEase
    </h1>
    <p class="text-gray-700 max-w-2xl mx-auto text-lg sm:text-xl">
     Your one-stop shop for the best products at unbeatable prices.
    </p>
   </section>
   <!-- Products Section -->
   <section class="mb-16" id="products">
    <h2 class="text-3xl font-semibold text-gray-800 mb-8 text-center">
     Featured Products
    </h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8" id="productsGrid">
     <!-- Products will be dynamically inserted here -->
    </div>
   </section>
   <!-- About Section -->
   <section class="mb-16 bg-white rounded-lg shadow-md p-8" id="about">
    <h2 class="text-3xl font-semibold text-gray-800 mb-4">
     About ShopEase
    </h2>
    <p class="text-gray-700 text-lg leading-relaxed">
     ShopEase is a modern e-commerce platform built with the latest web technologies. We offer a wide range of products, from electronics to fashion, all at competitive prices. Our mission is to provide a seamless shopping experience with fast delivery and excellent customer service.
    </p>
    <img alt="E-commerce warehouse with boxes and packages ready for shipment" class="mt-6 rounded-lg shadow-md mx-auto" height="300" src="https://storage.googleapis.com/a1aa/image/76ebcc17-64f6-413b-427f-6d5ff619c712.jpg" width="600"/>
   </section>
   <!-- Contact Section -->
   <section class="mb-16 bg-white rounded-lg shadow-md p-8" id="contact">
    <h2 class="text-3xl font-semibold text-gray-800 mb-4">
     Contact Us
    </h2>
    <form class="max-w-lg mx-auto space-y-6" id="contactForm">
     <div>
      <label class="block text-gray-700 font-semibold mb-1" for="name">
       Name
      </label>
      <input class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="name" name="name" required="" type="text"/>
     </div>
     <div>
      <label class="block text-gray-700 font-semibold mb-1" for="email">
       Email
      </label>
      <input class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="email" name="email" required="" type="email"/>
     </div>
     <div>
      <label class="block text-gray-700 font-semibold mb-1" for="message">
       Message
      </label>
      <textarea class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="message" name="message" required="" rows="4"></textarea>
     </div>
     <button class="bg-indigo-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-indigo-700 transition" type="submit">
      Send Message
     </button>
    </form>
   </section>
  </main>
  <!-- Cart Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="cartModal">
   <div class="bg-white rounded-lg shadow-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto p-6 relative">
    <button class="absolute top-4 right-4 text-gray-600 hover:text-indigo-600 text-2xl font-bold" id="closeCartBtn">
     ×
    </button>
    <h3 class="text-2xl font-semibold mb-4">
     Your Cart
    </h3>
    <div class="space-y-4" id="cartItems">
     <!-- Cart items will be dynamically inserted here -->
    </div>
    <div class="mt-6 flex justify-between items-center border-t pt-4">
     <span class="text-xl font-semibold">
      Total:
     </span>
     <span class="text-xl font-bold text-indigo-600" id="cartTotal">
      $0.00
     </span>
    </div>
    <div class="mt-6 flex justify-end space-x-4">
     <button class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition" id="clearCartBtn">
      Clear Cart
     </button>
     <button class="bg-indigo-600 text-white px-6 py-2 rounded-md hover:bg-indigo-700 transition" id="checkoutBtn">
      Checkout
     </button>
    </div>
   </div>
  </div>
  <!-- Login Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="loginModal">
   <div class="bg-white rounded-lg shadow-lg max-w-md w-full p-6 relative">
    <button class="absolute top-4 right-4 text-gray-600 hover:text-indigo-600 text-2xl font-bold" id="closeLoginBtn">
     ×
    </button>
    <h3 class="text-2xl font-semibold mb-6 text-center">
     Login to ShopEase
    </h3>
    <form class="space-y-6" id="loginForm">
     <div>
      <label class="block text-gray-700 font-semibold mb-1" for="emailLogin">
       Email
      </label>
      <input class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="emailLogin" name="emailLogin" required="" type="email"/>
     </div>
     <div>
      <label class="block text-gray-700 font-semibold mb-1" for="passwordLogin">
       Password
      </label>
      <input class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="passwordLogin" name="passwordLogin" required="" type="password"/>
     </div>
     <button class="w-full bg-indigo-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-indigo-700 transition" type="submit">
      Login
     </button>
    </form>
    <p class="mt-4 text-center text-gray-600">
     Don't have an account?
     <button class="text-indigo-600 font-semibold hover:underline" id="showRegisterBtn">
      Register
     </button>
    </p>
   </div>
  </div>
  <!-- Register Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="registerModal">
   <div class="bg-white rounded-lg shadow-lg max-w-md w-full p-6 relative">
    <button class="absolute top-4 right-4 text-gray-600 hover:text-indigo-600 text-2xl font-bold" id="closeRegisterBtn">
     ×
    </button>
    <h3 class="text-2xl font-semibold mb-6 text-center">
     Register at ShopEase
    </h3>
    <form class="space-y-6" id="registerForm">
     <div>
      <label class="block text-gray-700 font-semibold mb-1" for="emailRegister">
       Email
      </label>
      <input class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="emailRegister" name="emailRegister" required="" type="email"/>
     </div>
     <div>
      <label class="block text-gray-700 font-semibold mb-1" for="passwordRegister">
       Password
      </label>
      <input class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="passwordRegister" name="passwordRegister" required="" type="password"/>
     </div>
     <button class="w-full bg-indigo-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-indigo-700 transition" type="submit">
      Register
     </button>
    </form>
    <p class="mt-4 text-center text-gray-600">
     Already have an account?
     <button class="text-indigo-600 font-semibold hover:underline" id="showLoginBtn">
      Login
     </button>
    </p>
   </div>
  </div>
  <!-- Checkout Modal -->
  <div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="checkoutModal">
   <div class="bg-white rounded-lg shadow-lg max-w-md w-full p-6 relative">
    <button class="absolute top-4 right-4 text-gray-600 hover:text-indigo-600 text-2xl font-bold" id="closeCheckoutBtn">
     ×
    </button>
    <h3 class="text-2xl font-semibold mb-6 text-center">
     Checkout
    </h3>
    <form class="space-y-6" id="checkoutForm">
     <div>
      <label class="block text-gray-700 font-semibold mb-1" for="fullName">
       Full Name
      </label>
      <input class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="fullName" name="fullName" required="" type="text"/>
     </div>
     <div>
      <label class="block text-gray-700 font-semibold mb-1" for="address">
       Address
      </label>
      <textarea class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="address" name="address" required="" rows="3"></textarea>
     </div>
     <div>
      <label class="block text-gray-700 font-semibold mb-1" for="phone">
       Phone Number
      </label>
      <input class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="phone" name="phone" required="" type="tel"/>
     </div>
     <button class="w-full bg-indigo-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-indigo-700 transition" type="submit">
      Place Order
     </button>
    </form>
   </div>
  </div>
  <script>
   // Firebase configuration - Replace with your own Firebase project config
    const firebaseConfig = {
      apiKey: "AIzaSyD-EXAMPLE-KEY-1234567890abcdef",
      authDomain: "your-project-id.firebaseapp.com",
      projectId: "your-project-id",
      storageBucket: "your-project-id.appspot.com",
      messagingSenderId: "1234567890",
      appId: "1:1234567890:web:abcdef123456"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const storage = firebase.storage();

    // DOM Elements
    const productsGrid = document.getElementById('productsGrid');
    const cartBtn = document.getElementById('cartBtn');
    const cartModal = document.getElementById('cartModal');
    const closeCartBtn = document.getElementById('closeCartBtn');
    const cartItemsContainer = document.getElementById('cartItems');
    const cartTotalEl = document.getElementById('cartTotal');
    const cartCountEl = document.getElementById('cartCount');
    const clearCartBtn = document.getElementById('clearCartBtn');
    const checkoutBtn = document.getElementById('checkoutBtn');

    const loginBtn = document.getElementById('loginBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const loginModal = document.getElementById('loginModal');
    const closeLoginBtn = document.getElementById('closeLoginBtn');
    const loginForm = document.getElementById('loginForm');
    const showRegisterBtn = document.getElementById('showRegisterBtn');

    const registerModal = document.getElementById('registerModal');
    const closeRegisterBtn = document.getElementById('closeRegisterBtn');
    const registerForm = document.getElementById('registerForm');
    const showLoginBtn = document.getElementById('showLoginBtn');

    const checkoutModal = document.getElementById('checkoutModal');
    const closeCheckoutBtn = document.getElementById('closeCheckoutBtn');
    const checkoutForm = document.getElementById('checkoutForm');

    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const mobileLoginBtn = document.getElementById('mobileLoginBtn');
    const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');

    // Cart data stored in localStorage
    let cart = JSON.parse(localStorage.getItem('shopEaseCart')) || [];

    // Products data - will be fetched from Firestore
    let products = [];

    // Utility: Format price as USD
    function formatPrice(price) {
      return `$${price.toFixed(2)}`;
    }

    // Render products grid
    function renderProducts() {
      productsGrid.innerHTML = '';
      products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'bg-white rounded-lg shadow-md overflow-hidden flex flex-col';

        const img = document.createElement('img');
        img.src = product.imageUrl;
        img.alt = product.imageAlt;
        img.className = 'w-full h-48 object-cover';

        const content = document.createElement('div');
        content.className = 'p-4 flex flex-col flex-grow';

        const title = document.createElement('h3');
        title.className = 'text-lg font-semibold text-gray-800 mb-2';
        title.textContent = product.name;

        const desc = document.createElement('p');
        desc.className = 'text-gray-600 text-sm flex-grow';
        desc.textContent = product.description;

        const price = document.createElement('p');
        price.className = 'text-indigo-600 font-bold mt-4 text-lg';
        price.textContent = formatPrice(product.price);

        const addToCartBtn = document.createElement('button');
        addToCartBtn.className = 'mt-4 bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 transition font-semibold';
        addToCartBtn.textContent = 'Add to Cart';
        addToCartBtn.addEventListener('click', () => addToCart(product.id));

        content.appendChild(title);
        content.appendChild(desc);
        content.appendChild(price);
        content.appendChild(addToCartBtn);

        productCard.appendChild(img);
        productCard.appendChild(content);

        productsGrid.appendChild(productCard);
      });
    }

    // Add product to cart
    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;

      const cartItem = cart.find(item => item.id === productId);
      if (cartItem) {
        cartItem.quantity++;
      } else {
        cart.push({ id: productId, quantity: 1 });
      }
      saveCart();
      updateCartCount();
      alert(`Added "${product.name}" to cart.`);
    }

    // Save cart to localStorage
    function saveCart() {
      localStorage.setItem('shopEaseCart', JSON.stringify(cart));
    }

    // Update cart count badge
    function updateCartCount() {
      const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
      cartCountEl.textContent = totalQuantity;
    }

    // Render cart modal items
    function renderCart() {
      cartItemsContainer.innerHTML = '';
      if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p class="text-gray-600 text-center">Your cart is empty.</p>';
        cartTotalEl.textContent = '$0.00';
        return;
      }

      let total = 0;
      cart.forEach(item => {
        const product = products.find(p => p.id === item.id);
        if (!product) return;

        const itemTotal = product.price * item.quantity;
        total += itemTotal;

        const cartItemDiv = document.createElement('div');
        cartItemDiv.className = 'flex items-center space-x-4 border-b border-gray-200 pb-4';

        const img = document.createElement('img');
        img.src = product.imageUrl;
        img.alt = product.imageAlt;
        img.className = 'w-20 h-20 object-cover rounded-md';

        const infoDiv = document.createElement('div');
        infoDiv.className = 'flex-grow';

        const name = document.createElement('h4');
        name.className = 'font-semibold text-gray-800';
        name.textContent = product.name;

        const priceQty = document.createElement('p');
        priceQty.className = 'text-gray-600';
        priceQty.textContent = `${formatPrice(product.price)} x ${item.quantity} = ${formatPrice(itemTotal)}`;

        infoDiv.appendChild(name);
        infoDiv.appendChild(priceQty);

        const qtyControls = document.createElement('div');
        qtyControls.className = 'flex items-center space-x-2';

        const minusBtn = document.createElement('button');
        minusBtn.className = 'text-indigo-600 hover:text-indigo-800 font-bold text-xl';
        minusBtn.textContent = '−';
        minusBtn.addEventListener('click', () => {
          if (item.quantity > 1) {
            item.quantity--;
          } else {
            cart = cart.filter(ci => ci.id !== item.id);
          }
          saveCart();
          renderCart();
          updateCartCount();
        });

        const qtyText = document.createElement('span');
        qtyText.className = 'w-6 text-center';
        qtyText.textContent = item.quantity;

        const plusBtn = document.createElement('button');
        plusBtn.className = 'text-indigo-600 hover:text-indigo-800 font-bold text-xl';
        plusBtn.textContent = '+';
        plusBtn.addEventListener('click', () => {
          item.quantity++;
          saveCart();
          renderCart();
          updateCartCount();
        });

        qtyControls.appendChild(minusBtn);
        qtyControls.appendChild(qtyText);
        qtyControls.appendChild(plusBtn);

        cartItemDiv.appendChild(img);
        cartItemDiv.appendChild(infoDiv);
        cartItemDiv.appendChild(qtyControls);

        cartItemsContainer.appendChild(cartItemDiv);
      });

      cartTotalEl.textContent = formatPrice(total);
    }

    // Clear cart
    clearCartBtn.addEventListener('click', () => {
      if (confirm('Are you sure you want to clear your cart?')) {
        cart = [];
        saveCart();
        renderCart();
        updateCartCount();
      }
    });

    // Show/hide modals
    function showModal(modal) {
      modal.classList.remove('hidden');
      modal.classList.add('flex');
      document.body.style.overflow = 'hidden';
    }
    function hideModal(modal) {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
      document.body.style.overflow = '';
    }

    cartBtn.addEventListener('click', () => {
      renderCart();
      showModal(cartModal);
    });
    closeCartBtn.addEventListener('click', () => hideModal(cartModal));

    loginBtn.addEventListener('click', () => showModal(loginModal));
    closeLoginBtn.addEventListener('click', () => hideModal(loginModal));
    mobileLoginBtn.addEventListener('click', () => {
      hideMobileMenu();
      showModal(loginModal);
    });

    logoutBtn.addEventListener('click', () => {
      auth.signOut();
    });
    mobileLogoutBtn.addEventListener('click', () => {
      hideMobileMenu();
      auth.signOut();
    });

    showRegisterBtn.addEventListener('click', () => {
      hideModal(loginModal);
      showModal(registerModal);
    });
    showLoginBtn.addEventListener('click', () => {
      hideModal(registerModal);
      showModal(loginModal);
    });
    closeRegisterBtn.addEventListener('click', () => hideModal(registerModal));

    mobileMenuBtn.addEventListener('click', () => {
      if (mobileMenu.classList.contains('hidden')) {
        mobileMenu.classList.remove('hidden');
      } else {
        mobileMenu.classList.add('hidden');
      }
    });

    function hideMobileMenu() {
      mobileMenu.classList.add('hidden');
    }

    // Login form submit
    loginForm.addEventListener('submit', e => {
      e.preventDefault();
      const email = loginForm.emailLogin.value.trim();
      const password = loginForm.passwordLogin.value.trim();
      auth.signInWithEmailAndPassword(email, password)
        .then(() => {
          alert('Logged in successfully!');
          loginForm.reset();
          hideModal(loginModal);
        })
        .catch(err => alert(err.message));
    });

    // Register form submit
    registerForm.addEventListener('submit', e => {
      e.preventDefault();
      const email = registerForm.emailRegister.value.trim();
      const password = registerForm.passwordRegister.value.trim();
      auth.createUserWithEmailAndPassword(email, password)
        .then(() => {
          alert('Account created successfully!');
          registerForm.reset();
          hideModal(registerModal);
          hideModal(loginModal);
        })
        .catch(err => alert(err.message));
    });

    // Contact form submit (store messages in Firestore)
    const contactForm = document.getElementById('contactForm');
    contactForm.addEventListener('submit', e => {
      e.preventDefault();
      const name = contactForm.name.value.trim();
      const email = contactForm.email.value.trim();
      const message = contactForm.message.value.trim();

      db.collection('contacts').add({
        name,
        email,
        message,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        alert('Message sent! We will get back to you soon.');
        contactForm.reset();
      }).catch(err => alert('Error sending message: ' + err.message));
    });

    // Checkout modal handlers
    checkoutBtn.addEventListener('click', () => {
      if (cart.length === 0) {
        alert('Your cart is empty.');
        return;
      }
      hideModal(cartModal);
      showModal(checkoutModal);
    });
    closeCheckoutBtn.addEventListener('click', () => hideModal(checkoutModal));

    checkoutForm.addEventListener('submit', e => {
      e.preventDefault();
      const fullName = checkoutForm.fullName.value.trim();
      const address = checkoutForm.address.value.trim();
      const phone = checkoutForm.phone.value.trim();

      if (!auth.currentUser) {
        alert('You must be logged in to place an order.');
        hideModal(checkoutModal);
        showModal(loginModal);
        return;
      }

      // Prepare order data
      const order = {
        userId: auth.currentUser.uid,
        fullName,
        address,
        phone,
        items: cart.map(item => {
          const product = products.find(p => p.id === item.id);
          return {
            productId: item.id,
            name: product.name,
            price: product.price,
            quantity: item.quantity
          };
        }),
        total: cart.reduce((sum, item) => {
          const product = products.find(p => p.id === item.id);
          return sum + product.price * item.quantity;
        }, 0),
        status: 'pending',
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      };

      db.collection('orders').add(order)
        .then(() => {
          alert('Order placed successfully! Thank you for shopping with us.');
          cart = [];
          saveCart();
          updateCartCount();
          checkoutForm.reset();
          hideModal(checkoutModal);
        })
        .catch(err => alert('Error placing order: ' + err.message));
    });

    // Auth state change listener
    auth.onAuthStateChanged(user => {
      if (user) {
        loginBtn.classList.add('hidden');
        logoutBtn.classList.remove('hidden');
        mobileLoginBtn.classList.add('hidden');
        mobileLogoutBtn.classList.remove('hidden');
      } else {
        loginBtn.classList.remove('hidden');
        logoutBtn.classList.add('hidden');
        mobileLoginBtn.classList.remove('hidden');
        mobileLogoutBtn.classList.add('hidden');
      }
    });

    // Load products from Firestore
    function loadProducts() {
      db.collection('products').get()
        .then(snapshot => {
          products = [];
          snapshot.forEach(doc => {
            const data = doc.data();
            products.push({
              id: doc.id,
              name: data.name,
              description: data.description,
              price: data.price,
              imageUrl: data.imageUrl,
              imageAlt: data.imageAlt
            });
          });
          renderProducts();
        })
        .catch(err => {
          console.error('Error loading products:', err);
          // Fallback: load sample products if Firestore fails
          loadSampleProducts();
        });
    }

    // Sample products fallback
    function loadSampleProducts() {
      products = [
        {
          id: 'prod1',
          name: 'Wireless Headphones',
          description: 'High-quality wireless headphones with noise cancellation.',
          price: 99.99,
          imageUrl: 'https://placehold.co/400x300?text=Wireless+Headphones',
          imageAlt: 'Black wireless headphones with cushioned ear cups on a white background'
        },
        {
          id: 'prod2',
          name: 'Smartwatch',
          description: 'Stylish smartwatch with fitness tracking and notifications.',
          price: 149.99,
          imageUrl: 'https://placehold.co/400x300?text=Smartwatch',
          imageAlt: 'Modern smartwatch with black strap displaying time and fitness stats'
        },
        {
          id: 'prod3',
          name: 'Bluetooth Speaker',
          description: 'Portable Bluetooth speaker with rich sound and deep bass.',
          price: 59.99,
          imageUrl: 'https://placehold.co/400x300?text=Bluetooth+Speaker',
          imageAlt: 'Compact black Bluetooth speaker on a wooden table with music notes'
        },
        {
          id: 'prod4',
          name: 'Gaming Mouse',
          description: 'Ergonomic gaming mouse with customizable buttons and RGB lighting.',
          price: 39.99,
          imageUrl: 'https://placehold.co/400x300?text=Gaming+Mouse',
          imageAlt: 'Black gaming mouse with RGB lighting on a dark background'
        },
        {
          id: 'prod5',
          name: '4K Monitor',
          description: 'Ultra HD 4K monitor with vibrant colors and wide viewing angles.',
          price: 299.99,
          imageUrl: 'https://placehold.co/400x300?text=4K+Monitor',
          imageAlt: 'Sleek 4K computer monitor displaying colorful graphics on a desk'
        },
        {
          id: 'prod6',
          name: 'Mechanical Keyboard',
          description: 'Mechanical keyboard with tactile switches and customizable keys.',
          price: 89.99,
          imageUrl: 'https://placehold.co/400x300?text=Mechanical+Keyboard',
          imageAlt: 'Mechanical keyboard with RGB backlighting on a black desk'
        },
        {
          id: 'prod7',
          name: 'Fitness Tracker',
          description: 'Lightweight fitness tracker with heart rate and sleep monitoring.',
          price: 49.99,
          imageUrl: 'https://placehold.co/400x300?text=Fitness+Tracker',
          imageAlt: 'Slim fitness tracker with black band showing heart rate on screen'
        },
        {
          id: 'prod8',
          name: 'DSLR Camera',
          description: 'Professional DSLR camera with interchangeable lenses and 24MP sensor.',
          price: 499.99,
          imageUrl: 'https://placehold.co/400x300?text=DSLR+Camera',
          imageAlt: 'Black DSLR camera with lens on a white background'
        },
        {
          id: 'prod9',
          name: 'Laptop Backpack',
          description: 'Durable laptop backpack with multiple compartments and USB charging port.',
          price: 69.99,
          imageUrl: 'https://placehold.co/400x300?text=Laptop+Backpack',
          imageAlt: 'Black laptop backpack standing upright on a gray surface'
        },
        {
          id: 'prod10',
          name: 'Wireless Charger',
          description: 'Fast wireless charger compatible with all Qi-enabled devices.',
          price: 29.99,
          imageUrl: 'https://placehold.co/400x300?text=Wireless+Charger',
          imageAlt: 'Round black wireless charger with smartphone placed on top'
        },
        {
          id: 'prod11',
          name: 'Noise Cancelling Earbuds',
          description: 'Compact earbuds with active noise cancellation and long battery life.',
          price: 79.99,
          imageUrl: 'https://placehold.co/400x300?text=Noise+Cancelling+Earbuds',
          imageAlt: 'Pair of black noise cancelling earbuds with charging case on white background'
        },
        {
          id: 'prod12',
          name: 'Smart Home Hub',
          description: 'Voice-controlled smart home hub compatible with multiple devices.',
          price: 129.99,
          imageUrl: 'https://placehold.co/400x300?text=Smart+Home+Hub',
          imageAlt: 'Small smart home hub device with glowing blue ring on a wooden table'
        },
        {
          id: 'prod13',
          name: 'Electric Toothbrush',
          description: 'Rechargeable electric toothbrush with multiple cleaning modes.',
          price: 39.99,
          imageUrl: 'https://placehold.co/400x300?text=Electric+Toothbrush',
          imageAlt: 'White electric toothbrush standing on charging base on bathroom counter'
        },
        {
          id: 'prod14',
          name: 'Portable Projector',
          description: 'Compact portable projector with HD resolution and built-in speakers.',
          price: 199.99,
          imageUrl: 'https://placehold.co/400x300?text=Portable+Projector',
          imageAlt: 'Small black portable projector projecting image on a white wall'
        },
        {
          id: 'prod15',
          name: 'Action Camera',
          description: 'Waterproof action camera with 4K video recording and image stabilization.',
          price: 149.99,
          imageUrl: 'https://placehold.co/400x300?text=Action+Camera',
          imageAlt: 'Compact black action camera with waterproof case on a rocky surface'
        }
      ];
      renderProducts();
    }

    // Initialize app
    function init() {
      updateCartCount();
      loadProducts();
    }

    init();
  </script>
 </body>
</html>
